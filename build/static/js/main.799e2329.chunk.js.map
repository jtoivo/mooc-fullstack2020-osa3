{"version":3,"sources":["services/personService.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","components/ErrorMessage.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","delete","put","Filter","filter","onChange","value","PersonForm","addPerson","newName","newNumber","onChangeName","onChangeNum","onSubmit","type","Persons","persons","remove","map","p","key","name","number","onClick","Notification","message","className","ErrorMessage","App","useState","setPersons","setNewName","setNewNumber","setFilter","notification","setNotification","errorMessage","setErrorMessage","showNotification","text","setTimeout","showError","update","changedPerson","personService","returnedPerson","catch","error","console","log","useEffect","initPersons","event","target","preventDefault","existing","find","toLowerCase","undefined","window","confirm","concat","person","includes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.799e2329.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n  const request = axios.post(baseUrl, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }\r\n","import React from 'react'\r\n\r\nconst Filter = ({ filter, onChange }) => {\r\n  return (\r\n    <div>\r\n      filter with <input value={filter} onChange={onChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  newNumber,\r\n  onChangeName,\r\n  onChangeNum,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        name: <input value={newName} onChange={onChangeName} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={onChangeNum} />\r\n      </div>\r\n      <div>\r\n        <button type='submit'>add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Persons = ({ persons, remove }) => {\r\n  return (\r\n    <ul>\r\n      {persons.map(p => {\r\n        return (\r\n          <li key={p.id}>\r\n            {p.name} {p.number}{' '}\r\n            <button onClick={() => remove(p)}>Delete</button>\r\n          </li>\r\n        )\r\n      })}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return <div className='notification'>{message}</div>\r\n}\r\n\r\nexport default Notification\r\n","import React from 'react'\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return <div className='error'>{message}</div>\r\n}\r\n\r\nexport default ErrorMessage\r\n","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/personService'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\nimport ErrorMessage from './components/ErrorMessage'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [notification, setNotification] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  const showNotification = text => {\r\n    setNotification(text)\r\n    setTimeout(() => {\r\n      setNotification(null)\r\n    }, 3000)\r\n  }\r\n  const showError = text => {\r\n    setErrorMessage(text)\r\n    setTimeout(() => {\r\n      setErrorMessage(null)\r\n    }, 7000)\r\n  }\r\n\r\n  const addPerson = event => {\r\n    event.preventDefault()\r\n    const existing = persons.find(\r\n      p => p.name.toLowerCase() === newName.toLowerCase()\r\n    )\r\n    if (existing !== undefined) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already added. Do you want to update the number?`\r\n        )\r\n      ) {\r\n        existing.number = newNumber\r\n        update(existing.id, existing)\r\n        setNewName('')\r\n        setNewNumber('')\r\n      }\r\n    } else if (newName !== '') {\r\n      const newPerson = {\r\n        name: newName,\r\n        number: newNumber,\r\n      }\r\n      personService\r\n        .create(newPerson)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          showNotification(`${returnedPerson.name} added.`)\r\n        })\r\n        .catch(error => {\r\n          showError(`Adding new person failed: ${error.response.data.error}`)\r\n        })\r\n    }\r\n  }\r\n\r\n  const remove = person => {\r\n    personService\r\n      .remove(person.id)\r\n      .then(() => {\r\n        setPersons(persons.filter(p => p.id !== person.id))\r\n        showNotification(`${person.name} deleted`)\r\n      })\r\n      .catch(error => {\r\n        showError(`Delete failed: ${error.response.data.error}`)\r\n      })\r\n  }\r\n\r\n  const update = (id, changedPerson) => {\r\n    personService\r\n      .update(id, changedPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.map(p => (p.id !== id ? p : returnedPerson)))\r\n        showNotification(`${returnedPerson.name} updated.`)\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response.data)\r\n        showError(`Update failed: ${error.response.data.error}`)\r\n        setPersons(persons.filter(p => p.id !== id))\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(initPersons => {\r\n      setPersons(initPersons)\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1> <Notification message={notification} />\r\n      <ErrorMessage message={errorMessage} />\r\n      <Filter\r\n        filter={filter}\r\n        onChange={event => setFilter(event.target.value)}\r\n      />\r\n      <h2>Add</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        onChangeName={event => setNewName(event.target.value)}\r\n        onChangeNum={event => setNewNumber(event.target.value)}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        persons={persons.filter(person =>\r\n          person.name.toLowerCase().includes(filter.toLowerCase())\r\n        )}\r\n        remove={remove}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}